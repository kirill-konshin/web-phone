{"version":3,"file":"demo.js","mappings":";UAAIA,iCCAJ,MAAMC,EAAM,EAAQ,sCACdC,EAAI,EAAQ,wCAElBC,OAAOC,OAASF,EAChBC,OAAOF,IAAMA,EAEbC,GAAE,KACA,MAAMG,EAAM,oDACNC,EAAW,EAAQ,0BAA4BH,OAAOI,YAAYD,SAGxE,IAAIE,EAAM,KACNC,EAAW,KAEXC,EAAW,KAEXC,EAAW,EACXC,EAAW,KACXC,EAAY,KACZC,EAAkB,GACtB,MAAMC,EAAOb,EAAE,QAETc,EAAiBd,EAAE,mBACnBe,EAAoBf,EAAE,uBACtBgB,EAAgBhB,EAAE,kBAClBiB,EAAoBjB,EAAE,sBACtBkB,EAAoBlB,EAAE,sBAEtBmB,EAAqBC,SAASC,eAAe,eAC7CC,EAAoBF,SAASC,eAAe,cAClD,IAAIE,GAAe,EACfC,EAAgB,GAMpB,SAASC,EAAcC,GACrB,OAAO1B,EAAE0B,EAAKC,OAChB,CA6DA,SAASC,EAAUC,EAAQC,EAAUC,EAAcC,EAAWC,EAAKC,EAAUC,GAW3E,OAVA1B,EAAW0B,EAEXC,aAAaC,QAAQ,iBAAkBR,GAAU,IACjDO,aAAaC,QAAQ,mBAAoBP,GAAY,IACrDM,aAAaC,QAAQ,uBAAwBN,GAAgB,IAC7DK,aAAaC,QAAQ,gBAAiBL,GAAa,IACnDI,aAAaC,QAAQ,oBAAqBJ,GAAO,IACjDG,aAAaC,QAAQ,mBAAoBH,GAAY,IACrDE,aAAaC,QAAQ,mBAAoB5B,GAAY,GAE9CF,EACJ+B,IAAI,uCACJC,MAAMC,GAAQA,EAAIC,SAClBF,MAAMC,IACL7B,EAAY6B,EACZE,QAAQC,IAAI,iBAAkBhC,GAEvBJ,EAASqC,KAAK,0CAA2C,CAC9DC,QAAS,CACP,CACEC,UAAW,aAKlBP,MAAMC,GAAQA,EAAIC,SAClBF,KAAKQ,GACLR,KAAKS,GACLC,OAAOC,IACNR,QAAQS,MAAM,+BACdT,QAAQS,MAAMD,EAAEE,OAASF,EAAE,GAEjC,CAEA,SAASH,EAASM,GA6DhB,OA5DA7C,EAAW,IAAIJ,EAASiD,EAAM,CAC5BC,YAAY,EACZxB,SAAUM,aAAamB,QAAQ,oBAC/BC,YAAa,CACXC,SAAS,EACTC,SAAU,qBACVC,SAAU,sBAEZlD,SAAUmD,SAASnD,EAAU,IAC7BoD,QAAS,eACTC,WAAY,QACZC,MAAO,CACLC,OAAQ7C,EACR8C,MAAO3C,GAET4C,WAAW,EACXC,0BAA0B,IAM5BlE,OAAOO,SAAWA,EAElBA,EAAS4D,UAAUZ,YAAYa,UAAU,IACzC7D,EAAS4D,UAAUE,GAAG,SAAUC,GAChC/D,EAAS4D,UAAUE,GAAG,cAAc,KAClC5B,QAAQC,IAAI,gBAAgB,IAE9BnC,EAAS4D,UAAUE,GAAG,aAAa,KACjC5B,QAAQC,IAAI,eAAe,IAE7BnC,EAAS4D,UAAUE,GAAG,gBAAgB,KACpC5B,QAAQC,IAAI,kBAAkB,IAEhCnC,EAAS4D,UAAUE,GAAG,cAAc,KAClC5B,QAAQC,IAAI,gBAAgB,IAE9BnC,EAAS4D,UAAUE,GAAG,gBAAgB,KACpC5B,QAAQC,IAAI,kBAAkB,IAEhCnC,EAAS4D,UAAUE,GAAG,sBAAsB,WAC1C5B,QAAQC,IAAI,wBAAyB6B,UACvC,IACAhE,EAAS4D,UAAUE,GAAG,WAAW,WAC/B5B,QAAQC,IAAI,aAAc6B,UAC5B,IACAhE,EAAS4D,UAAUtB,UAAUwB,GAAG,mBAAmB,KACjD5B,QAAQC,IAAI,4CACZnC,EAAS4D,UAAUtB,UAAU2B,WAAU,EAAK,IAE9CjE,EAAS4D,UAAUtB,UAAUwB,GAAG,UAAU,KACxC5B,QAAQC,IAAI,oBAAoB,IAElCnC,EAAS4D,UAAUtB,UAAUwB,GAAG,kBAAkB,KAChD5B,QAAQC,IAAI,mCAAmC,IAEjDnC,EAAS4D,UAAUtB,UAAUwB,GAAG,qBAAqB,KACnD5B,QAAQC,IAAI,sCAAsC,IAE7CnC,CACT,CAEA,SAAS+D,EAASG,GAMhB,GALAnD,GAAe,EACfmB,QAAQC,IAAI,gBAAiB+B,EAAQC,SACrCjC,QAAQC,IAAI,KAAM+B,EAAQC,QAAQC,GAAGC,YAAaH,EAAQC,QAAQC,GAAGE,cACrEpC,QAAQC,IAAI,OAAQ+B,EAAQC,QAAQI,KAAKF,YAAaH,EAAQC,QAAQI,KAAKD,cAEvEJ,EAAQC,QAAQK,QAAQ,eAAkE,gBAAjDN,EAAQC,QAAQK,QAAQ,cAAc,GAAGC,IACpFP,EACGQ,SACA3C,MAAK,KACJ4C,EAAWT,EAAQ,IAEpBzB,OAAOC,IACNR,QAAQS,MAAM,gBAAiBD,EAAEE,OAASF,EAAE,QAE3C,CACL,MAAMkC,EAAS3D,EAAcR,GAAmBoE,MAAM,CACpDC,SAAU,WAGZF,EAAOG,KAAK,WAAWjB,GAAG,SAAS,KACjCc,EAAOG,KAAK,kBAAkBC,IAAI,UAAW,QAC7CJ,EAAOG,KAAK,aAAaC,IAAI,UAAW,IACxCd,EACGQ,SACA3C,MAAK,KACJ6C,EAAOC,MAAM,QACbF,EAAWT,EAAQ,IAEpBzB,OAAOC,IACNR,QAAQS,MAAM,gBAAiBD,EAAEE,OAASF,EAAE,GAC5C,IAGNkC,EAAOG,KAAK,YAAYjB,GAAG,SAAS,KAClCI,EAAQe,SACRL,EAAOC,MAAM,OAAO,IAGtBD,EAAOG,KAAK,gBAAgBjB,GAAG,SAAS,KACtCI,EAAQgB,cACRN,EAAOC,MAAM,OAAO,IAGtBD,EAAOG,KAAK,iBAAiBjB,GAAG,UAAWpB,IACzCA,EAAEyC,iBACFzC,EAAE0C,kBACFlB,EACGmB,QAAQT,EAAOG,KAAK,uBAAuBO,MAAMC,QACjDxD,MAAK,KACJG,QAAQC,IAAI,aACZyC,EAAOC,MAAM,OAAO,IAErBpC,OAAO+C,IACNtD,QAAQS,MAAM,iBAAkB6C,EAAG5C,OAAS4C,EAAG,GAC/C,IAGNZ,EAAOG,KAAK,eAAejB,GAAG,UAAWpB,IACvCA,EAAEyC,iBACFzC,EAAE0C,kBACFlB,EACGuB,iBAAiB,CAChBC,UAAW,EACXC,UAAWf,EAAOG,KAAK,qBAAqBO,QAE7CvD,MAAK,KACJG,QAAQC,IAAI,WACZyC,EAAOC,MAAM,OAAO,IAErBpC,OAAO+C,IACNtD,QAAQS,MAAM,eAAgB6C,EAAG5C,OAAS4C,EAAG,GAC7C,IAGNtB,EAAQJ,GAAG,YAAY,KACrBc,EAAOC,MAAM,OAAO,GAExB,CACF,CAEA,MAAMe,EAAyB,KAAM,CACnCC,GAAI,GACJtB,KAAM,GACNH,GAAI,GACJ0B,UAAW,GACXC,QAAS,CACPC,MAAO,GACPC,QAAS,MAkBb,SAAStB,EAAWT,GAClBhC,QAAQC,IAAI,kBAAmB+B,EAAQC,SACvCjC,QAAQC,IAAI,KAAM+B,EAAQC,QAAQC,GAAGC,YAAaH,EAAQC,QAAQC,GAAGE,cACrEpC,QAAQC,IAAI,OAAQ+B,EAAQC,QAAQI,KAAKF,YAAaH,EAAQC,QAAQI,KAAKD,cAE3E,MAAMM,EAAS3D,EAAcP,GAAmBmE,QAE1CqB,EAAQtB,EAAOG,KAAK,SAASoB,GAAG,GAChCC,EAAQxB,EAAOG,KAAK,oBAAoBoB,GAAG,GAC3CE,EAAYzB,EAAOG,KAAK,wBAAwBoB,GAAG,GACnDG,EAAQ1B,EAAOG,KAAK,oBAAoBoB,GAAG,GAG3CI,GAFc3B,EAAOG,KAAK,0BAA0BoB,GAAG,GAE5CK,aAAY,KAC3B,MAAMC,EAAOvC,EAAQwC,UAAYC,KAAKC,OAAOC,KAAKC,MAAQ5C,EAAQwC,WAAa,KAAQ,IAAM,UAC7FR,EAAMa,KAAK,SAAWN,EAAO,gBAAkBO,KAAKC,UAAU/C,EAAQwC,UAAW,KAAM,GAAK,KAAK,GAChG,MAEH,SAASQ,IACPC,cAAcZ,GACd3B,EAAOC,MAAM,OACf,CAEAD,EAAOG,KAAK,oBAAoBjB,GAAG,SAAS,KAC1CI,EAAQN,UAAUZ,YAAYa,WACc,OAAzCK,EAAQN,UAAUZ,YAAYoE,OAAkBlD,EAAQN,UAAUZ,YAAYoE,OAAS,IAAO,GAChG,IAGHxC,EAAOG,KAAK,oBAAoBjB,GAAG,SAAS,KAC1CI,EAAQN,UAAUZ,YAAYa,WACc,OAAzCK,EAAQN,UAAUZ,YAAYoE,OAAkBlD,EAAQN,UAAUZ,YAAYoE,OAAS,IAAO,GAChG,IAGHxC,EAAOG,KAAK,SAASjB,GAAG,SAAS,KAC/BI,EAAQmD,MAAM,IAGhBzC,EAAOG,KAAK,WAAWjB,GAAG,SAAS,KACjCI,EAAQoD,QAAQ,IAGlB1C,EAAOG,KAAK,SAASjB,GAAG,SAAS,KAC/BI,EACGqD,OACAxF,MAAK,KACJG,QAAQC,IAAI,UAAU,IAEvBM,OAAOC,IACNR,QAAQS,MAAM,iBAAkBD,EAAEE,OAASF,EAAE,GAC7C,IAGNkC,EAAOG,KAAK,WAAWjB,GAAG,SAAS,KACjCI,EACGsD,SACAzF,MAAK,KACJG,QAAQC,IAAI,YAAY,IAEzBM,OAAOC,IACNR,QAAQS,MAAM,mBAAoBD,EAAEE,OAASF,EAAE,GAC/C,IAENkC,EAAOG,KAAK,gBAAgBjB,GAAG,SAAS,KACtCI,EACGuD,cACA1F,MAAK,KACJG,QAAQC,IAAI,oBAAoB,IAEjCM,OAAOC,IACNR,QAAQS,MAAM,yBAA0BD,EAAEE,OAASF,EAAE,GACrD,IAGNkC,EAAOG,KAAK,eAAejB,GAAG,SAAS,KACrCI,EACGwD,aACA3F,MAAK,KACJG,QAAQC,IAAI,oBAAoB,IAEjCM,OAAOC,IACNR,QAAQS,MAAM,wBAAyBD,EAAEE,OAASF,EAAE,GACpD,IAGNkC,EAAOG,KAAK,SAASjB,GAAG,SAAS,KAC/BI,EACGyD,OACA5F,MAAK,KACJG,QAAQC,IAAI,SAAS,IAEtBM,OAAOC,IACNR,QAAQS,MAAM,cAAeD,EAAEE,OAASF,EAAE,GAC1C,IAGNkC,EAAOG,KAAK,kBAAkBjB,GAAG,UAAWpB,IAC1CA,EAAEyC,iBACFzC,EAAE0C,kBACFlB,EACG0D,SAASvB,EAAUf,MAAMC,QACzBxD,MAAK,KACJG,QAAQC,IAAI,eACZyC,EAAOC,MAAM,OAAO,IAErBpC,OAAO+C,IACNtD,QAAQS,MAAM,kBAAmB6C,EAAG5C,OAAS4C,EAAG,GAChD,IAGNZ,EAAOG,KAAK,8BAA8BjB,GAAG,SAAUpB,IACrDA,EAAEyC,iBACFzC,EAAE0C,kBACFlB,EAAQqD,OAAOxF,MAAK,KAClBG,QAAQC,IAAI,0DACZ,MAAM0F,EAAa3D,EAAQN,UAAUkE,OAAOzB,EAAUf,MAAMC,QAC5DsC,EAAWE,KAAK,eAAe,KAC7B7F,QAAQC,IAAI,8DACZyC,EAAOG,KAAK,kCAAkCjB,GAAG,SAAS,KACxDI,EACG8D,aAAaH,GACb9F,MAAK,KACJG,QAAQC,IAAI,0BAA0B,IAEvCM,OAAO+C,IACNtD,QAAQS,MAAM,kBAAmB6C,EAAG5C,OAAS4C,EAAG,GAChD,GACJ,GACF,GACF,IAGJZ,EAAOG,KAAK,cAAcjB,GAAG,UAAWpB,IACtCA,EAAEyC,iBACFzC,EAAE0C,kBACFlB,EACG+D,KAAK3B,EAAMhB,MAAMC,QACjBxD,MAAK,KACJG,QAAQC,IAAI,UAAU,IAEvBM,OAAO+C,IACNtD,QAAQS,MAAM,cAAe6C,EAAG5C,OAAS4C,EAAG,IAEhDc,EAAMhB,IAAI,GAAG,IAGfV,EAAOG,KAAK,cAAcjB,GAAG,UAAWpB,IACtCA,EAAEyC,iBACFzC,EAAE0C,kBACFlB,EAAQgE,KAAK9B,EAAMd,MAAMC,QACzBa,EAAMd,IAAI,GAAG,IAGUV,EAAOG,KAAK,cAEpBjB,GAAG,SAAUpB,IAuFzByF,GAeEpI,EAAS+B,IAAI,4EAbfC,MAAMC,GAAQA,EAAIC,SAClBF,MAAMqG,IACL,MAAMC,EAAMD,EAASE,YAAY,GAAGC,QAC9BC,EAAMJ,EAASE,YAAY,GAAGG,mBAcnC1I,EACJqC,KAAK,+CAAgD,CAAC,GACtDL,MAAMC,GAAQA,EAAIC,SAClBF,MAAMC,IACLhB,EAAgBgB,EAAIkC,QAAQ2B,GACrB7D,EAAIkC,QAAQwE,kBAlBW3G,MAAM4G,KAsB1C,SAA6BC,EAAQP,EAAKG,GACxC,MAAMtE,EAAUlE,EAAS4D,UAAUkE,OAAOc,EAAQ,CAChDC,WAAY3I,IAEdgE,EAAQJ,GAAG,eAAe,KACxBa,EAAWT,GACXhC,QAAQC,IAAI,2BAYhB,SAAiBqG,EAAKH,GACpB,MAAMS,EAAM,sDAAwD9H,EAAgB,oBACpF,OAAOjB,EAASqC,KAAK0G,EAAK,CACxBL,mBAAoBD,EACpBD,QAASF,GAEb,CAjBIU,CAAQP,EAAKH,GACVtG,MAAMC,GAAQA,EAAIC,SAClBF,MAAMqG,IACLlG,QAAQC,IAAI,sCAAuCiG,EAAS,IAE7D3F,OAAOC,IACNR,QAAQS,MAAM,yBAA0BD,EAAEE,OAASF,EAAE,GACrD,GAER,CArCUsG,CAAoBL,EAAYN,EAAKG,GACrCL,GAAe,CAAI,GACnB,GA/FU,IAGlBvD,EAAOG,KAAK,WAAWjB,GAAG,SAAS,KACjCI,EAAQ+E,SAAS,IAGnB/E,EAAQJ,GAAG,eAAe,KACxB5B,QAAQC,IAAI,sBAnLhB,SAA+B+B,GAC7B,MAAM4B,EAAY/E,EAAe,WAAa,UACxCmI,EAAiBtD,IACvBsD,EAAe3E,KAAOL,EAAQC,QAAQI,KAAK4E,IAAIC,KAC/CF,EAAe9E,GAAKF,EAAQC,QAAQC,GAAG+E,IAAIC,KAC3CF,EAAepD,UAAYA,EAC3BoD,EAAerD,GAAK3B,EAAQmF,OAAOxD,GAAGyD,OACtCJ,EAAenD,QAAQE,QAAU/B,EAAQmF,OAAOE,UAChDL,EAAenD,QAAQC,MAAQ9B,EAAQmF,OAAOG,SACzC5H,aAAamB,QAAQ,mBACxBnB,aAAaC,QAAQ,iBAAkBmF,KAAKC,UAAUiC,GAE1D,CAwKIO,CAAsBvF,EAAQ,IAEhCA,EAAQJ,GAAG,YAAY,KACrB5B,QAAQC,IAAI,kBAAkB,IAEhC+B,EAAQJ,GAAG,YAAY,KACrB5B,QAAQC,IAAI,mBACZ+E,GAAO,IAEThD,EAAQJ,GAAG,UAAU,WACnB5B,QAAQC,IAAI,gBAAiB6B,WAC7BkD,GACF,IACAhD,EAAQJ,GAAG,cAAc,KACvB5B,QAAQC,IAAI,qBACZP,aAAaC,QAAQ,iBAAkB,IACvCqF,GAAO,IAEThD,EAAQJ,GAAG,UAAU,KACnB5B,QAAQC,IAAI,iBACZ+E,GAAO,IAEThD,EAAQJ,GAAG,SAAS,KAClB5B,QAAQC,IAAI,gBACZ+E,GAAO,IAEThD,EAAQJ,GAAG,YAAa+D,IACtB3F,QAAQC,IAAI,+BAAgC+B,EAAS,yBAA0B2D,GAC/EX,IACAvC,EAAWkD,EAAW,IAExB3D,EAAQJ,GAAG,QAAQ,KACjB5B,QAAQC,IAAI,cAAc,IAE5B+B,EAAQJ,GAAG,SAAS,KAClB5B,QAAQC,IAAI,eAAe,IAE7B+B,EAAQJ,GAAG,WAAW,KACpB5B,QAAQC,IAAI,iBAAiB,IAE/B+B,EAAQJ,GAAG,cAAc,KACvB5B,QAAQC,IAAI,oBAAoB,IAElC+B,EAAQJ,GAAG,OAAO,KAChB5B,QAAQC,IAAI,cACZ+E,GAAO,GAEX,CA2BA,IAAIiB,GAAe,EAyDnB,SAAS3F,IACP,MAAMkH,EAAQzI,EAAcT,GAEtBmJ,EAAUD,EAAM3E,KAAK,sBAAsBoB,GAAG,GAC9CyD,EAAeF,EAAM3E,KAAK,2BAA2BoB,GAAG,GACxD0D,EAAYH,EAAM3E,KAAK,aAAaoB,GAAG,GACvC2D,EAAUJ,EAAM3E,KAAK,WAAWoB,GAAG,GACnC4D,EAAUL,EAAM3E,KAAK,WAAWoB,GAAG,GAEzC0D,EAAU1I,KACR,2BAEEhB,EAAU6J,QAAQC,UAClB,IACA9J,EAAU6J,QAAQE,SAJpB,6BAOG/J,EAAU6J,QAAQG,SAAW,KAPhC,sCAUEjK,GACqB,KAApBE,EAAyB,GAAK,IAAMA,GAXvC,cAgBF0J,EAAQhG,GAAG,SAAUpB,IACnB1C,EAAS4D,UAAUwG,aACnB1H,EAAEyC,iBACFkF,SAASC,QAAQ,IAGnBP,EAAQjG,GAAG,SAAUpB,KAhGvB,WACE,MAAM6H,EAAiBvD,KAAKwD,MAAM5I,aAAamB,QAAQ,mBACvDb,QAAQC,IAAI,yCAA0CoI,GAEtD5F,EADgB3E,EAAS4D,UAAU6G,WAAWF,GAEhD,CA4FIG,EAAY,IAGdf,EAAQrE,IAAI1D,aAAamB,QAAQ,uBAAyB,IAE1D2G,EAAM5F,GAAG,UAAWpB,IAxHtB,IAAkBkG,EAAQ+B,EAyHtBjI,EAAEyC,iBACFzC,EAAE0C,kBAEFxD,aAAaC,QAAQ,qBAAsB8H,EAAQrE,OAAS,IA5H9CsD,EA8HLe,EAAQrE,MA9HKqF,EA8HEf,EAAatE,MA7HvCvE,GAAe,EACf4J,EACEA,GACCxK,GACCA,EAAUyK,kBACVzK,EAAUyK,iBAAiBC,aAC3B1K,EAAUyK,iBAAiBC,YAAYhF,IACzC,KAOFlB,EALgB3E,EAAS4D,UAAUkE,OAAOc,EAAQ,CAChDC,WAAY3I,EACZyK,kBAkH2C,IAG7CtK,EAAKyK,QAAQC,OAAOrB,EACtB,EAEA,WACE,MAAMA,EAAQzI,EAAcX,GACtB0K,EAAY/J,EAAcV,GAE1B0K,EAAUD,EAAUjG,KAAK,sBAAsBoB,GAAG,GAClD+E,EAAYF,EAAUjG,KAAK,wBAAwBoB,GAAG,GACtDgF,EAAgBH,EAAUjG,KAAK,4BAA4BoB,GAAG,GAC9D0D,EAAYH,EAAM3E,KAAK,wBAAwBoB,GAAG,GAClDiF,EAAO1B,EAAM3E,KAAK,yBAAyBoB,GAAG,GAC9CkF,EAAY3B,EAAM3E,KAAK,wBAAwBoB,GAAG,GAClDmF,EAAYN,EAAUjG,KAAK,yBAAyBoB,GAAG,GAE7D8E,EAAQ3F,IAAI1D,aAAamB,QAAQ,mBAAqBpD,EAAI0B,OAAOkK,SACjEL,EAAU5F,IAAI1D,aAAamB,QAAQ,qBAAuB,IAC1DoI,EAAc7F,IAAI1D,aAAamB,QAAQ,yBAA2B,IAClE8G,EAAUvE,IAAI1D,aAAamB,QAAQ,kBAAoB,IACvDqI,EAAK9F,IAAI1D,aAAamB,QAAQ,sBAAwB,IACtDsI,EAAU/F,IAAI1D,aAAamB,QAAQ,qBAAuB,IAC1DuI,EAAUhG,IAAI1D,aAAamB,QAAQ,qBAAuB9C,GAE1DyJ,EAAM5F,GAAG,UAAWpB,IAvnBtB,IAAerB,EAAQC,EAAUC,EAAcC,EAAWgK,EAAY9J,EAAUC,EAwnB5EO,QAAQC,IAAI,eAEZO,EAAEyC,iBACFzC,EAAE0C,kBA3nBS/D,EA8nBT4J,EAAQ3F,MA9nBShE,EA+nBjB4J,EAAU5F,MA/nBiB/D,EAgoB3B4J,EAAc7F,MAhoB2B9D,EAioBzCqI,EAAUvE,MAjoB0CkG,EAkoBpDJ,EAAK9F,MAloB2D5D,EAmoBhE2J,EAAU/F,MAnoBgE3D,EAooB1E2J,EAAUhG,MAnoBdxF,EAAM,IAAIH,EAAI,CACZ2B,WACAC,eACAF,WAGFtB,EAAWD,EAAIC,WAEfG,EAAWsB,EACXpB,EAAkBoL,EAEdtL,IACFA,EAAWA,EAASuL,MAAM,SAAWvL,EAAW,IAAMA,EACtDA,EAAWA,EAASwL,QAAQ,MAAO,KAGrC3L,EACG4L,MAAM,CACLzL,WACAC,UAAWqL,GAAc,KACzB9J,aAEDK,MAAK,IACGX,EAAUC,EAAQC,EAAUC,EAAcrB,EAAUsL,EAAY9J,EAAUC,KAElFc,OAAOC,IACNR,QAAQS,MAAMD,EAAEE,OAASF,EAAE,GA0mB5B,IAGHsI,EAAUlH,GAAG,UAAWpB,IACtBR,QAAQC,IAAI,mBAEZO,EAAEyC,iBACFzC,EAAE0C,kBA5mBN,SAA0B/D,EAAQC,EAAUC,EAAcI,GACxD,MAAMiK,EAAeC,mBAAmBpM,OAAO4K,SAASyB,KAAKC,MAAM,QAAS,GAAK,iBAEjF7J,QAAQC,IAAI,2BAA4ByJ,GAExC9L,EAAM,IAAIH,EAAI,CACZ2B,WACAC,eACAF,SACA2K,YAAaJ,IAGf7L,EAAWD,EAAIC,WAEf,MAAMkM,EAAWlM,EAASkM,WAE1BlM,EACGmM,YAAY,CAAEpD,IAAKmD,IACnBlK,KAAKhC,EAAS4L,MAAMQ,KAAKpM,IACzBgC,MAAK,IACGX,EAAUC,EAAQC,EAAUC,EAAc,GAAI,GAAI,GAAII,KAE9Dc,OAAOC,IACNR,QAAQS,MAAMD,EAAEE,OAASF,EAAE,GAEjC,CAqlBI0J,CAAiBnB,EAAQ3F,MAAO4F,EAAU5F,MAAO6F,EAAc7F,MAAOgG,EAAUhG,MAAM,IAGxFjF,EAAKyK,QAAQC,OAAOC,GAAWD,OAAOrB,EACxC,CAEA2C,EAAe,8CC7rBjBC,EAAOC,aAAUC,8FCCbC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBH,IAAjBI,EACH,OAAOA,EAAaL,QAGrB,IAAID,EAASG,EAAyBE,GAAY,CACjD9G,GAAI8G,EACJE,QAAQ,EACRN,QAAS,CAAC,GAUX,OANAO,EAAoBH,GAAUI,KAAKT,EAAOC,QAASD,EAAQA,EAAOC,QAASG,GAG3EJ,EAAOO,QAAS,EAGTP,EAAOC,OACf,CAGAG,EAAoBM,EAAIF,EH5BpBxN,EAAW,GACfoN,EAAoBO,EAAI,CAACC,EAAQC,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASC,EAAI,EAAGA,EAAIlO,EAASmO,OAAQD,IAAK,CAGzC,IAFA,IAAKL,EAAUC,EAAIC,GAAY/N,EAASkO,GACpCE,GAAY,EACPC,EAAI,EAAGA,EAAIR,EAASM,OAAQE,MACpB,EAAXN,GAAsBC,GAAgBD,IAAaO,OAAOC,KAAKnB,EAAoBO,GAAGa,OAAOC,GAASrB,EAAoBO,EAAEc,GAAKZ,EAASQ,MAC9IR,EAASa,OAAOL,IAAK,IAErBD,GAAY,EACTL,EAAWC,IAAcA,EAAeD,IAG7C,GAAGK,EAAW,CACbpO,EAAS0O,OAAOR,IAAK,GACrB,IAAIS,EAAIb,SACEZ,IAANyB,IAAiBf,EAASe,EAC/B,CACD,CACA,OAAOf,CAnBP,CAJCG,EAAWA,GAAY,EACvB,IAAI,IAAIG,EAAIlO,EAASmO,OAAQD,EAAI,GAAKlO,EAASkO,EAAI,GAAG,GAAKH,EAAUG,IAAKlO,EAASkO,GAAKlO,EAASkO,EAAI,GACrGlO,EAASkO,GAAK,CAACL,EAAUC,EAAIC,EAqBjB,EIzBdX,EAAoBwB,EAAI,CAAC3B,EAAS4B,KACjC,IAAI,IAAIJ,KAAOI,EACXzB,EAAoB0B,EAAED,EAAYJ,KAASrB,EAAoB0B,EAAE7B,EAASwB,IAC5EH,OAAOS,eAAe9B,EAASwB,EAAK,CAAEO,YAAY,EAAMxM,IAAKqM,EAAWJ,IAE1E,ECNDrB,EAAoB6B,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOC,MAAQ,IAAIC,SAAS,cAAb,EAChB,CAAE,MAAOhM,GACR,GAAsB,iBAAXjD,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxBiN,EAAoB0B,EAAI,CAACO,EAAKC,IAAUhB,OAAOiB,UAAUC,eAAe/B,KAAK4B,EAAKC,GCClFlC,EAAoBuB,EAAK1B,IACH,oBAAXwC,QAA0BA,OAAOC,aAC1CpB,OAAOS,eAAe9B,EAASwC,OAAOC,YAAa,CAAEC,MAAO,WAE7DrB,OAAOS,eAAe9B,EAAS,aAAc,CAAE0C,OAAO,GAAO,ECL9DvC,EAAoBwC,IAAO5C,IAC1BA,EAAO6C,MAAQ,GACV7C,EAAO8C,WAAU9C,EAAO8C,SAAW,IACjC9C,SCER,IAAI+C,EAAkB,CACrB,KAAQ,GAaT3C,EAAoBO,EAAEU,EAAK2B,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4B3M,KACvD,IAGI8J,EAAU2C,GAHTnC,EAAUsC,EAAaC,GAAW7M,EAGhB2K,EAAI,EAC3B,GAAGL,EAASwC,MAAM9J,GAAgC,IAAxBwJ,EAAgBxJ,KAAa,CACtD,IAAI8G,KAAY8C,EACZ/C,EAAoB0B,EAAEqB,EAAa9C,KACrCD,EAAoBM,EAAEL,GAAY8C,EAAY9C,IAGhD,GAAG+C,EAAS,IAAIxC,EAASwC,EAAQhD,EAClC,CAEA,IADG8C,GAA4BA,EAA2B3M,GACrD2K,EAAIL,EAASM,OAAQD,IACzB8B,EAAUnC,EAASK,GAChBd,EAAoB0B,EAAEiB,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAO5C,EAAoBO,EAAEC,EAAO,EAGjC0C,EAAqBC,KAAwC,kCAAIA,KAAwC,mCAAK,GAClHD,EAAmBE,QAAQP,EAAqBpD,KAAK,KAAM,IAC3DyD,EAAmBG,KAAOR,EAAqBpD,KAAK,KAAMyD,EAAmBG,KAAK5D,KAAKyD,QC7CvF,IAAII,EAAsBtD,EAAoBO,OAAET,EAAW,CAAC,eAAe,IAAOE,EAAoB,qBACtGsD,EAAsBtD,EAAoBO,EAAE+C","sources":["webpack://ringcentral-web-phone/webpack/runtime/chunk loaded","webpack://ringcentral-web-phone/./demo/index.js","webpack://ringcentral-web-phone/external var {\"commonjs\":\"ringcentral-web-phone\",\"commonjs2\":\"ringcentral-web-phone\",\"amd\":\"ringcentral-web-phone\",\"root\":[\"RingCentral\",\"WebPhone\"]}","webpack://ringcentral-web-phone/webpack/bootstrap","webpack://ringcentral-web-phone/webpack/runtime/define property getters","webpack://ringcentral-web-phone/webpack/runtime/global","webpack://ringcentral-web-phone/webpack/runtime/hasOwnProperty shorthand","webpack://ringcentral-web-phone/webpack/runtime/make namespace object","webpack://ringcentral-web-phone/webpack/runtime/node module decorator","webpack://ringcentral-web-phone/webpack/runtime/jsonp chunk loading","webpack://ringcentral-web-phone/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","const SIP = require('sip.js');\nconst $ = require('jquery');\n\nwindow.jQuery = $;\nwindow.SIP = SIP;\n\n$(() => {\n  const SDK = require('@ringcentral/sdk').SDK;\n  const WebPhone = require('ringcentral-web-phone') || window.RingCentral.WebPhone;\n\n  /** @type {SDK} */\n  let sdk = null;\n  let platform = null;\n  /** @type {WebPhone} */\n  let webPhone = null;\n\n  let logLevel = 0;\n  let username = null;\n  let extension = null;\n  let extensionNumber = '';\n  const $app = $('#app');\n\n  const $loginTemplate = $('#template-login');\n  const $authFlowTemplate = $('#template-auth-flow');\n  const $callTemplate = $('#template-call');\n  const $incomingTemplate = $('#template-incoming');\n  const $acceptedTemplate = $('#template-accepted');\n\n  const remoteVideoElement = document.getElementById('remoteVideo');\n  const localVideoElement = document.getElementById('localVideo');\n  let outboundCall = true;\n  let confSessionId = '';\n\n  /**\n   * @param {jQuery|HTMLElement} $tpl\n   * @return {jQuery|HTMLElement}\n   */\n  function cloneTemplate($tpl) {\n    return $($tpl.html());\n  }\n\n  function login(server, clientId, clientSecret, _username, _extension, password, ll) {\n    sdk = new SDK({\n      clientId,\n      clientSecret,\n      server,\n    });\n\n    platform = sdk.platform();\n\n    username = _username;\n    extensionNumber = _extension;\n    // TODO: Improve later to support international phone number country codes better\n    if (username) {\n      username = username.match(/^[+1]/) ? username : '1' + username;\n      username = username.replace(/\\W/g, '');\n    }\n\n    platform\n      .login({\n        username,\n        extension: _extension || null,\n        password,\n      })\n      .then(() => {\n        return postLogin(server, clientId, clientSecret, username, _extension, password, ll);\n      })\n      .catch((e) => {\n        console.error(e.stack || e);\n      });\n  }\n\n  // Redirect function\n  function show3LeggedLogin(server, clientId, clientSecret, ll) {\n    const $redirectUri = decodeURIComponent(window.location.href.split('login', 1) + 'callback.html');\n\n    console.log('The redirect uri value :', $redirectUri);\n\n    sdk = new SDK({\n      clientId,\n      clientSecret,\n      server,\n      redirectUri: $redirectUri,\n    });\n\n    platform = sdk.platform();\n\n    const loginUrl = platform.loginUrl();\n\n    platform\n      .loginWindow({ url: loginUrl }) // this method also allows to supply more options to control window position\n      .then(platform.login.bind(platform))\n      .then(() => {\n        return postLogin(server, clientId, clientSecret, '', '', '', ll);\n      })\n      .catch((e) => {\n        console.error(e.stack || e);\n      });\n  }\n\n  function postLogin(server, clientId, clientSecret, _username, ext, password, ll) {\n    logLevel = ll;\n\n    localStorage.setItem('webPhoneServer', server || '');\n    localStorage.setItem('webPhoneclientId', clientId || '');\n    localStorage.setItem('webPhoneclientSecret', clientSecret || '');\n    localStorage.setItem('webPhoneLogin', _username || '');\n    localStorage.setItem('webPhoneExtension', ext || '');\n    localStorage.setItem('webPhonePassword', password || '');\n    localStorage.setItem('webPhoneLogLevel', logLevel || 0);\n\n    return platform\n      .get('/restapi/v1.0/account/~/extension/~')\n      .then((res) => res.json())\n      .then((res) => {\n        extension = res;\n        console.log('Extension info', extension);\n\n        return platform.post('/restapi/v1.0/client-info/sip-provision', {\n          sipInfo: [\n            {\n              transport: 'WSS',\n            },\n          ],\n        });\n      })\n      .then((res) => res.json())\n      .then(register)\n      .then(makeCallForm)\n      .catch((e) => {\n        console.error('Error in main promise chain');\n        console.error(e.stack || e);\n      });\n  }\n\n  function register(data) {\n    webPhone = new WebPhone(data, {\n      enableDscp: true,\n      clientId: localStorage.getItem('webPhoneclientId'),\n      audioHelper: {\n        enabled: true,\n        incoming: 'audio/incoming.ogg',\n        outgoing: 'audio/outgoing.ogg',\n      },\n      logLevel: parseInt(logLevel, 10),\n      appName: 'WebPhoneDemo',\n      appVersion: '1.0.0',\n      media: {\n        remote: remoteVideoElement,\n        local: localVideoElement,\n      },\n      enableQos: true,\n      enableMediaReportLogging: true,\n      // enableTurnServers: true or false,\n      // turnServers: [{urls:'turn:192.168.0.1', username : 'turn' , credential: 'turn'}],\n      // iceTransportPolicy: \"all\" or \"relay\",\n      // iceCheckingTimeout:500\n    });\n    window.webPhone = webPhone; // for debugging\n\n    webPhone.userAgent.audioHelper.setVolume(0.3);\n    webPhone.userAgent.on('invite', onInvite);\n    webPhone.userAgent.on('connecting', () => {\n      console.log('UA connecting');\n    });\n    webPhone.userAgent.on('connected', () => {\n      console.log('UA Connected');\n    });\n    webPhone.userAgent.on('disconnected', () => {\n      console.log('UA Disconnected');\n    });\n    webPhone.userAgent.on('registered', () => {\n      console.log('UA Registered');\n    });\n    webPhone.userAgent.on('unregistered', () => {\n      console.log('UA Unregistered');\n    });\n    webPhone.userAgent.on('registrationFailed', function () {\n      console.log('UA RegistrationFailed', arguments);\n    });\n    webPhone.userAgent.on('message', function () {\n      console.log('UA Message', arguments);\n    });\n    webPhone.userAgent.transport.on('switchBackProxy', () => {\n      console.log('switching back to primary outbound proxy');\n      webPhone.userAgent.transport.reconnect(true);\n    });\n    webPhone.userAgent.transport.on('closed', () => {\n      console.log('WebSocket closed.');\n    });\n    webPhone.userAgent.transport.on('transportError', () => {\n      console.log('WebSocket transportError occured');\n    });\n    webPhone.userAgent.transport.on('wsConnectionError', () => {\n      console.log('WebSocket wsConnectionError occured');\n    });\n    return webPhone;\n  }\n\n  function onInvite(session) {\n    outboundCall = false;\n    console.log('EVENT: Invite', session.request);\n    console.log('To', session.request.to.displayName, session.request.to.friendlyName);\n    console.log('From', session.request.from.displayName, session.request.from.friendlyName);\n\n    if (session.request.headers['Alert-Info'] && session.request.headers['Alert-Info'][0].raw === 'Auto Answer') {\n      session\n        .accept()\n        .then(() => {\n          onAccepted(session);\n        })\n        .catch((e) => {\n          console.error('Accept failed', e.stack || e);\n        });\n    } else {\n      const $modal = cloneTemplate($incomingTemplate).modal({\n        backdrop: 'static',\n      });\n\n      $modal.find('.answer').on('click', () => {\n        $modal.find('.before-answer').css('display', 'none');\n        $modal.find('.answered').css('display', '');\n        session\n          .accept()\n          .then(() => {\n            $modal.modal('hide');\n            onAccepted(session);\n          })\n          .catch((e) => {\n            console.error('Accept failed', e.stack || e);\n          });\n      });\n\n      $modal.find('.decline').on('click', () => {\n        session.reject();\n        $modal.modal('hide');\n      });\n\n      $modal.find('.toVoicemail').on('click', () => {\n        session.toVoicemail();\n        $modal.modal('hide');\n      });\n\n      $modal.find('.forward-form').on('submit', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        session\n          .forward($modal.find('input[name=forward]').val().trim())\n          .then(() => {\n            console.log('Forwarded');\n            $modal.modal('hide');\n          })\n          .catch((e2) => {\n            console.error('Forward failed', e2.stack || e2);\n          });\n      });\n\n      $modal.find('.reply-form').on('submit', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        session\n          .replyWithMessage({\n            replyType: 0,\n            replyText: $modal.find('input[name=reply]').val(),\n          })\n          .then(() => {\n            console.log('Replied');\n            $modal.modal('hide');\n          })\n          .catch((e2) => {\n            console.error('Reply failed', e2.stack || e2);\n          });\n      });\n\n      session.on('rejected', () => {\n        $modal.modal('hide');\n      });\n    }\n  }\n\n  const activeCallInfoTemplate = () => ({\n    id: '',\n    from: '',\n    to: '',\n    direction: '',\n    sipData: {\n      toTag: '',\n      fromTag: '',\n    },\n  });\n\n  function captureActiveCallInfo(session) {\n    const direction = outboundCall ? 'Outbound' : 'Inbound';\n    const activeCallInfo = activeCallInfoTemplate();\n    activeCallInfo.from = session.request.from.uri.user;\n    activeCallInfo.to = session.request.to.uri.user;\n    activeCallInfo.direction = direction;\n    activeCallInfo.id = session.dialog.id.callId;\n    activeCallInfo.sipData.fromTag = session.dialog.remoteTag;\n    activeCallInfo.sipData.toTag = session.dialog.localTag;\n    if (!localStorage.getItem('activeCallInfo')) {\n      localStorage.setItem('activeCallInfo', JSON.stringify(activeCallInfo));\n    }\n  }\n\n  function onAccepted(session) {\n    console.log('EVENT: Accepted', session.request);\n    console.log('To', session.request.to.displayName, session.request.to.friendlyName);\n    console.log('From', session.request.from.displayName, session.request.from.friendlyName);\n\n    const $modal = cloneTemplate($acceptedTemplate).modal();\n\n    const $info = $modal.find('.info').eq(0);\n    const $dtmf = $modal.find('input[name=dtmf]').eq(0);\n    const $transfer = $modal.find('input[name=transfer]').eq(0);\n    const $flip = $modal.find('input[name=flip]').eq(0);\n    const $conference = $modal.find('input[name=conference]').eq(0);\n\n    const interval = setInterval(() => {\n      const time = session.startTime ? Math.round((Date.now() - session.startTime) / 1000) + 's' : 'Ringing';\n      $info.text('time: ' + time + '\\nstartTime: ' + JSON.stringify(session.startTime, null, 2) + '\\n');\n    }, 1000);\n\n    function close() {\n      clearInterval(interval);\n      $modal.modal('hide');\n    }\n\n    $modal.find('.increase-volume').on('click', () => {\n      session.userAgent.audioHelper.setVolume(\n        (session.userAgent.audioHelper.volume !== null ? session.userAgent.audioHelper.volume : 0.5) + 0.1,\n      );\n    });\n\n    $modal.find('.decrease-volume').on('click', () => {\n      session.userAgent.audioHelper.setVolume(\n        (session.userAgent.audioHelper.volume !== null ? session.userAgent.audioHelper.volume : 0.5) - 0.1,\n      );\n    });\n\n    $modal.find('.mute').on('click', () => {\n      session.mute();\n    });\n\n    $modal.find('.unmute').on('click', () => {\n      session.unmute();\n    });\n\n    $modal.find('.hold').on('click', () => {\n      session\n        .hold()\n        .then(() => {\n          console.log('Holding');\n        })\n        .catch((e) => {\n          console.error('Holding failed', e.stack || e);\n        });\n    });\n\n    $modal.find('.unhold').on('click', () => {\n      session\n        .unhold()\n        .then(() => {\n          console.log('UnHolding');\n        })\n        .catch((e) => {\n          console.error('UnHolding failed', e.stack || e);\n        });\n    });\n    $modal.find('.startRecord').on('click', () => {\n      session\n        .startRecord()\n        .then(() => {\n          console.log('Recording Started');\n        })\n        .catch((e) => {\n          console.error('Recording Start failed', e.stack || e);\n        });\n    });\n\n    $modal.find('.stopRecord').on('click', () => {\n      session\n        .stopRecord()\n        .then(() => {\n          console.log('Recording Stopped');\n        })\n        .catch((e) => {\n          console.error('Recording Stop failed', e.stack || e);\n        });\n    });\n\n    $modal.find('.park').on('click', () => {\n      session\n        .park()\n        .then(() => {\n          console.log('Parked');\n        })\n        .catch((e) => {\n          console.error('Park failed', e.stack || e);\n        });\n    });\n\n    $modal.find('.transfer-form').on('submit', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      session\n        .transfer($transfer.val().trim())\n        .then(() => {\n          console.log('Transferred');\n          $modal.modal('hide');\n        })\n        .catch((e2) => {\n          console.error('Transfer failed', e2.stack || e2);\n        });\n    });\n\n    $modal.find('.transfer-form button.warm').on('click', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      session.hold().then(() => {\n        console.log('Placing the call on hold, initiating attended transfer');\n        const newSession = session.userAgent.invite($transfer.val().trim());\n        newSession.once('established', () => {\n          console.log('New call initated. Click Complete to complete the transfer');\n          $modal.find('.transfer-form button.complete').on('click', () => {\n            session\n              .warmTransfer(newSession)\n              .then(() => {\n                console.log('Warm transfer completed');\n              })\n              .catch((e2) => {\n                console.error('Transfer failed', e2.stack || e2);\n              });\n          });\n        });\n      });\n    });\n\n    $modal.find('.flip-form').on('submit', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      session\n        .flip($flip.val().trim())\n        .then(() => {\n          console.log('Flipped');\n        })\n        .catch((e2) => {\n          console.error('Flip failed', e2.stack || e2);\n        });\n      $flip.val('');\n    });\n\n    $modal.find('.dtmf-form').on('submit', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      session.dtmf($dtmf.val().trim());\n      $dtmf.val('');\n    });\n\n    const $startConfButton = $modal.find('.startConf');\n\n    $startConfButton.on('click', (e) => {\n      initConference();\n    });\n\n    $modal.find('.hangup').on('click', () => {\n      session.dispose();\n    });\n\n    session.on('established', () => {\n      console.log('Event: Established');\n      captureActiveCallInfo(session);\n    });\n    session.on('progress', () => {\n      console.log('Event: Progress');\n    });\n    session.on('rejected', () => {\n      console.log('Event: Rejected');\n      close();\n    });\n    session.on('failed', function () {\n      console.log('Event: Failed', arguments);\n      close();\n    });\n    session.on('terminated', () => {\n      console.log('Event: Terminated');\n      localStorage.setItem('activeCallInfo', '');\n      close();\n    });\n    session.on('cancel', () => {\n      console.log('Event: Cancel');\n      close();\n    });\n    session.on('refer', () => {\n      console.log('Event: Refer');\n      close();\n    });\n    session.on('replaced', (newSession) => {\n      console.log('Event: Replaced: old session', session, 'has been replaced with', newSession);\n      close();\n      onAccepted(newSession);\n    });\n    session.on('dtmf', () => {\n      console.log('Event: DTMF');\n    });\n    session.on('muted', () => {\n      console.log('Event: Muted');\n    });\n    session.on('unmuted', () => {\n      console.log('Event: Unmuted');\n    });\n    session.on('connecting', () => {\n      console.log('Event: Connecting');\n    });\n    session.on('bye', () => {\n      console.log('Event: Bye');\n      close();\n    });\n  }\n\n  function makeCall(number, homeCountryId) {\n    outboundCall = true;\n    homeCountryId =\n      homeCountryId ||\n      (extension &&\n        extension.regionalSettings &&\n        extension.regionalSettings.homeCountry &&\n        extension.regionalSettings.homeCountry.id) ||\n      null;\n\n    const session = webPhone.userAgent.invite(number, {\n      fromNumber: username,\n      homeCountryId,\n    });\n\n    onAccepted(session);\n  }\n\n  function switchCall() {\n    const activeCallItem = JSON.parse(localStorage.getItem('activeCallInfo'));\n    console.log('Switching active call to current tab: ', activeCallItem);\n    const session = webPhone.userAgent.switchFrom(activeCallItem);\n    onAccepted(session);\n  }\n\n  let onConference = false;\n\n  function initConference() {\n    if (!onConference) {\n      getPresenceActiveCalls()\n        .then((res) => res.json())\n        .then((response) => {\n          const pId = response.activeCalls[0].partyId;\n          const tId = response.activeCalls[0].telephonySessionId;\n          getConfVoiceToken(pId, tId).then((voiceToken) => {\n            startConferenceCall(voiceToken, pId, tId);\n            onConference = true;\n          });\n        });\n    }\n  }\n\n  function getPresenceActiveCalls() {\n    return platform.get('/restapi/v1.0/account/~/extension/~/presence?detailedTelephonyState=true');\n  }\n\n  function getConfVoiceToken(pId, tId) {\n    return platform\n      .post('/restapi/v1.0/account/~/telephony/conference', {})\n      .then((res) => res.json())\n      .then((res) => {\n        confSessionId = res.session.id;\n        return res.session.voiceCallToken;\n      });\n  }\n\n  function startConferenceCall(number, pId, tId) {\n    const session = webPhone.userAgent.invite(number, {\n      fromNumber: username,\n    });\n    session.on('established', () => {\n      onAccepted(session);\n      console.log('Conference call started');\n      bringIn(tId, pId)\n        .then((res) => res.json())\n        .then((response) => {\n          console.log('Adding call to conference succesful', response);\n        })\n        .catch((e) => {\n          console.error('Conference call failed', e.stack || e);\n        });\n    });\n  }\n\n  function bringIn(tId, pId) {\n    const url = '/restapi/v1.0/account/accountId/telephony/sessions/' + confSessionId + '/parties/bring-in';\n    return platform.post(url, {\n      telephonySessionId: tId,\n      partyId: pId,\n    });\n  }\n\n  function makeCallForm() {\n    const $form = cloneTemplate($callTemplate);\n\n    const $number = $form.find('input[name=number]').eq(0);\n    const $homeCountry = $form.find('input[name=homeCountry]').eq(0);\n    const $username = $form.find('.username').eq(0);\n    const $logout = $form.find('.logout').eq(0);\n    const $switch = $form.find('.switch').eq(0);\n\n    $username.html(\n      '<dl>' +\n        '<dt>Contact</dt><dd>' +\n        extension.contact.firstName +\n        ' ' +\n        extension.contact.lastName +\n        '</dd>' +\n        '<dt>Company</dt><dd>' +\n        (extension.contact.company || '?') +\n        '</dd>' +\n        '<dt>From Phone Number</dt><dd>' +\n        username +\n        (extensionNumber === '' ? '' : '*' + extensionNumber) +\n        '</dd>' +\n        '</dl>',\n    );\n\n    $logout.on('click', (e) => {\n      webPhone.userAgent.unregister();\n      e.preventDefault();\n      location.reload();\n    });\n\n    $switch.on('click', (e) => {\n      switchCall();\n    });\n\n    $number.val(localStorage.getItem('webPhoneLastNumber') || '');\n\n    $form.on('submit', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      localStorage.setItem('webPhoneLastNumber', $number.val() || '');\n\n      makeCall($number.val(), $homeCountry.val());\n    });\n\n    $app.empty().append($form);\n  }\n\n  function makeLoginForm() {\n    const $form = cloneTemplate($loginTemplate);\n    const $authForm = cloneTemplate($authFlowTemplate);\n\n    const $server = $authForm.find('input[name=server]').eq(0);\n    const $clientId = $authForm.find('input[name=clientId]').eq(0);\n    const $clientSecret = $authForm.find('input[name=clientSecret]').eq(0);\n    const $username = $form.find('input[name=username]').eq(0);\n    const $ext = $form.find('input[name=extension]').eq(0);\n    const $password = $form.find('input[name=password]').eq(0);\n    const $logLevel = $authForm.find('select[name=logLevel]').eq(0);\n\n    $server.val(localStorage.getItem('webPhoneServer') || SDK.server.sandbox);\n    $clientId.val(localStorage.getItem('webPhoneclientId') || '');\n    $clientSecret.val(localStorage.getItem('webPhoneclientSecret') || '');\n    $username.val(localStorage.getItem('webPhoneLogin') || '');\n    $ext.val(localStorage.getItem('webPhoneExtension') || '');\n    $password.val(localStorage.getItem('webPhonePassword') || '');\n    $logLevel.val(localStorage.getItem('webPhoneLogLevel') || logLevel);\n\n    $form.on('submit', (e) => {\n      console.log('Normal Flow');\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      login(\n        $server.val(),\n        $clientId.val(),\n        $clientSecret.val(),\n        $username.val(),\n        $ext.val(),\n        $password.val(),\n        $logLevel.val(),\n      );\n    });\n    //\n    $authForm.on('submit', (e) => {\n      console.log('Authorized Flow');\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      show3LeggedLogin($server.val(), $clientId.val(), $clientSecret.val(), $logLevel.val());\n    });\n\n    $app.empty().append($authForm).append($form);\n  }\n\n  makeLoginForm();\n});\n","module.exports = undefined;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"demo\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkringcentral_web_phone\"] = self[\"webpackChunkringcentral_web_phone\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"demoVendor\"], () => (__webpack_require__(\"./demo/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","SIP","$","window","jQuery","SDK","WebPhone","RingCentral","sdk","platform","webPhone","logLevel","username","extension","extensionNumber","$app","$loginTemplate","$authFlowTemplate","$callTemplate","$incomingTemplate","$acceptedTemplate","remoteVideoElement","document","getElementById","localVideoElement","outboundCall","confSessionId","cloneTemplate","$tpl","html","postLogin","server","clientId","clientSecret","_username","ext","password","ll","localStorage","setItem","get","then","res","json","console","log","post","sipInfo","transport","register","makeCallForm","catch","e","error","stack","data","enableDscp","getItem","audioHelper","enabled","incoming","outgoing","parseInt","appName","appVersion","media","remote","local","enableQos","enableMediaReportLogging","userAgent","setVolume","on","onInvite","arguments","reconnect","session","request","to","displayName","friendlyName","from","headers","raw","accept","onAccepted","$modal","modal","backdrop","find","css","reject","toVoicemail","preventDefault","stopPropagation","forward","val","trim","e2","replyWithMessage","replyType","replyText","activeCallInfoTemplate","id","direction","sipData","toTag","fromTag","$info","eq","$dtmf","$transfer","$flip","interval","setInterval","time","startTime","Math","round","Date","now","text","JSON","stringify","close","clearInterval","volume","mute","unmute","hold","unhold","startRecord","stopRecord","park","transfer","newSession","invite","once","warmTransfer","flip","dtmf","onConference","response","pId","activeCalls","partyId","tId","telephonySessionId","voiceCallToken","voiceToken","number","fromNumber","url","bringIn","startConferenceCall","dispose","activeCallInfo","uri","user","dialog","callId","remoteTag","localTag","captureActiveCallInfo","$form","$number","$homeCountry","$username","$logout","$switch","contact","firstName","lastName","company","unregister","location","reload","activeCallItem","parse","switchFrom","switchCall","homeCountryId","regionalSettings","homeCountry","empty","append","$authForm","$server","$clientId","$clientSecret","$ext","$password","$logLevel","sandbox","_extension","match","replace","login","$redirectUri","decodeURIComponent","href","split","redirectUri","loginUrl","loginWindow","bind","show3LeggedLogin","makeLoginForm","module","exports","undefined","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","Object","keys","every","key","splice","r","d","definition","o","defineProperty","enumerable","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","value","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","push","__webpack_exports__"],"sourceRoot":""}